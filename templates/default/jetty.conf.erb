# ========================================================
# jetty.conf Configuration for jetty.sh script
# --------------------------------------------------------
# This file is used by the jetty.sh script to provide
# extra configuration arguments for the start.jar command
# created by that script.
#
# Each line in this file becomes an arguement to start.jar
# unless this file contains an --ini option, then these
# arguments will be in addition to those found in the
# start.ini file
# =======================================================
<% if not node['jetty']['start_ini']['custom'] %>
<%   if node['jetty']['port'] < 1024 or (node['jetty']['ssl_port'] and node['jetty']['ssl_port'] < 1024) %>
-Djetty.startServerAsPrivileged=true
-Djetty.username=<%= node[:jetty][:user] %>
-Djetty.group=<%= node[:jetty][:group] %>
<%   end %>
<%   if node['jetty']['ssl_port'] and node['jetty']['ssl_subject'] %>
-Djetty.keystore=etc/keystore
-Djetty.keystore.password=<%= node['jetty']['ssl_obfpass'] %>
-Djetty.keymanager.password=<%= node['jetty']['ssl_obfpass'] %>
-Djetty.truststore=etc/keystore
-Djetty.truststore.password=<%= node['jetty']['ssl_obfpass'] %>
-Djetty.secure.port=<%= node['jetty']['ssl_port'] %>
-Djetty.https.port=<%= node['jetty']['ssl_port'] %>
<%   end %>
--exec
<%   if node['jetty']['port'] < 1024 or (node['jetty']['ssl_port'] and node['jetty']['ssl_port'] < 1024) %>
OPTIONS=setuid
etc/jetty-setuid.xml
<%   end %>
<%   if node['jetty']['ssl_port'] and node['jetty']['ssl_subject'] %>
etc/jetty-ssl.xml
etc/jetty-https.xml
<%   end %>
<% end %>
<% for @conf in node['jetty']['add_confs'] %>
<%= @conf %>
<% end %>
